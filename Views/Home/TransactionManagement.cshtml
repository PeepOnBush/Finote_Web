@model Finote_Web.ViewModels.TransactionManagementViewModel
@{
    ViewData["Title"] = "Transaction Management";
}

<main>
    <div class="page-header">
        <h1>Transaction Management</h1>
        <p>View, edit, and analyze all user transactions.</p>
    </div>

    <!-- Stats Cards Grid -->
    <div class="stats-grid">
        <div class="stat-card color-green">
            <i class="fas fa-arrow-up"></i>
            <h2>@Model.TotalIncome.ToString("C")</h2>
            <p>Total Income</p>
        </div>
        <div class="stat-card color-red">
            <!-- A new color for expenses -->
            <i class="fas fa-arrow-down"></i>
            <h2>@Model.TotalExpense.ToString("C")</h2>
            <p>Total Expense</p>
        </div>
        <div class="stat-card color-blue">
            <i class="fas fa-receipt"></i>
            <h2>@Model.TransactionCount</h2>
            <p>Total Transactions</p>
        </div>
        <div class="stat-card color-yellow">
            <i class="fas fa-balance-scale"></i>
            <h2>@((Model.TotalIncome - Model.TotalExpense).ToString("C"))</h2>
            <p>Net Balance</p>
        </div>
    </div>

    <!-- Content Card for the table -->
    <div class="content-card">
        <div class="toolbar">
            <div class="search-wrapper">
                <i class="fas fa-search"></i>
                <input type="search" placeholder="Search by note, category, or user...">
            </div>
            <a href="#" class="btn-primary"><i class="fas fa-plus"></i> Add New Transaction</a>
        </div>

        <div class="table-wrapper">
            <table>
                <thead>
                    <tr>
                        <th>AMOUNT</th>
                        <th>CATEGORY</th>
                        <th>NOTE</th>
                        <th>USER</th>
                        <th>WALLET</th>
                        <th>DATE</th>
                        <th>ACTIONS</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var tx in Model.Transactions)
                    {
                        <tr>
                            <td>
                                <span class="amount @(tx.TransactionType == "Income" ? "income" : "expense")">
                                    @(tx.TransactionType == "Income" ? "+ " : "- ")@tx.Amount.ToString("N2")
                                </span>
                            </td>
                            <td>@tx.CategoryName</td>
                            <td>@tx.Note</td>
                            <td>@tx.UserName</td>
                            <td>@tx.WalletName</td>
                            <td>@tx.TransactionDate.ToString("yyyy-MM-dd")</td>
                            <td class="actions-cell">
                                <a href="#" class="action-btn" title="Edit"><i class="fas fa-pencil-alt"></i></a>
                                <a href="#" class="action-btn" title="Details"><i class="fas fa-eye"></i></a>
                                <a href="#" class="action-btn delete-btn" title="Delete"><i class="fas fa-trash-alt"></i></a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</main>